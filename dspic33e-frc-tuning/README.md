![image](../images/microchip.jpg)

## Dynamic tuning of Internal Fast RC Oscillator 

## Description:

The dsPIC® Digital Signal Controllers feature an internal Fast RC (FRC) oscillator that is optionally routed
via the PLL in many devices. The FRC oscillator is calibrated to be nominally 7.37MHz at the factory.
For applications that need to tune the FRC oscillator to some value other than 7.37 MHz, special tuning bits
are provided on-chip. The attached code example demonstrates how the FRC oscillator may be tuned for any 
dsPIC33E device in the General Purpose, Motor-Control and Sensor families.

The attached code example has 4 files - main.c and tuneFrcOsc.c,ctglPin.s,traps.c.The code example in the 
tuneFrcOsc.c file provides a mechanism to tune the frequency of the FRC oscillator. 
The TUN bits (4 or more in number) reside in the OSCCON register in Oscillator System Version 1 and Version 2.
In Oscillator System Version 3, the TUN bits are located in the OSCTUN register. The traps.c file contains 
trap service routines (handlers) for hardware exceptions generated by the dsPIC33E device.

The function in the tuneFrcOsc.c file has the following prototype:  

Function:       void  tuneFrcOsc(unsigned int )  
Input:          signed int data type equal in the range [-32,31]  
Description:    This subroutine writes to TUN bits which are present in the
                OSCTUN register.

The code in the main.c file simply requests to tune the FRC to the maximum allowed limit. The step size (in Hz)
is provided in the device datasheets. It is usually 0.75% or 1.5% of the nominal value and varies per device. 

## Hardware Used

- Explorer 16/32 Development Board (https://www.microchip.com/DM240001-2)
- dsPIC33EP512GM710 PIM (https://www.microchip.com/ma330035) or dsPIC33EP512MU810 PIM (https://www.microchip.com/MA330025-1) or dsPIC33EP256GP506 PIM (https://www.microchip.com/MA330030)	
	
	
## Software Used 

- MPLAB® X IDE v6.00 or newer (https://www.microchip.com/mplabx)
- MPLAB® XC16 v2.00 or newer (https://www.microchip.com/xc)

